import Head from "next/head";
import Image from "next/image";
import Link from "next/link";
import MainContainer from "../components/Containers/MainContainer/MainContainer";
import { getPostsByRegion } from "../services/queries/PostsByRegion";
import styles from "../styles/Home.module.css";
import { Notas3Principales } from "../components/Regiones/Notas3Principales/Notas3Principales";
import MenuPrincipal from "../components/ui/MenuPrincipal/MenuPrincipal";
import { NotasSubDestacadas } from "../components/Regiones/NotasSubDestacadas/NotasSubDestacadas";
import { Footer } from "../components/ui/Footer/Footer";

export default function Home({ notasSubDestacadas, notas3Principales }) {
  return (
    <>
      <Head>
        <title>Página demostración taller prensa obrera</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <MenuPrincipal />
      <main>
        <MainContainer>
          <Notas3Principales notas3Principales={notas3Principales} />
          <NotasSubDestacadas notasSubDestacadas={notasSubDestacadas} />
        </MainContainer>
      </main>
      <Footer />
    </>
  );
}

export async function getServerSideProps() {
  const notasSubDestacadas = await getPostsByRegion("notas-sub-destacadas", 4);
  const notas3Principales = await getPostsByRegion("3-notas-principales", 3);
  return {
    props: {
      notasSubDestacadas: notasSubDestacadas.posts,
      notas3Principales: notas3Principales.posts,
    },
  };
}
